<!DOCTYPE html>
<html>
	<link href ="/css/play.css" rel ="stylesheet">
	<script defer src = "/js/fontawesome-all.js"></script>
	<div class ="container">
	<head>
		<a href ="./index"><i class ="fa fa-home fa-2x"></i></a>
		<title>FocusFriend</title>
		<center>
			<h1>Focus Together!</h1>
			<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
				{{#with animals.[0]}}
						<img id ="image" src ="{{imageURL}}"/>
					{{/with}} 
			<script> 
				
				setInterval("myFunction()", 10);
				function myFunction() {

					var happy = ["./images/Happy1.png","./images/Happy2.png","./images/Happy3.png"];
					var i = document.getElementById("image");
				    //shouln't affect timeout
				    var currentPos = 0;
				    function foto() {
				    	i.src = happy[currentPos];
					    	currentPos++;
					        if (currentPos == happy.length){
					        	currentPos = 0;
					        }
					}
				    	if(document.hasFocus()) {
				    		//i.src = "./images/Happy2.png";
				    		setInterval(foto(), 1000);
						// var x = document.getElementById("demo");
				   		} else {
				    // doc is not in focus and has been touching 
						
						//var x = document.getElementById("image");
						//image.src=parsedData[0].imageURL;
						//console.log(image)
						//var imagu = document.getElementById("image");
							i.src = "./images/Sad.png";
						//image.src="./images/Sad.png";
						//badPic();
							console.log(image);
					  		//document.write("doggo getting sadder");
						}
					}
			</script>

	</head>
	<body>

<!-- 			{{#each animals}}
						<a id="image"><img src ="{{imageURL}}"/></a> 
			{{/each}} -->
		<!-- we should put their chosen animal var here later -->
		

			<!-- timer implemented below -->			
			<p id="demo"></p>
			<button onclick ="completeTask()">Click When Time's Up to Finish!</button>

			<!-- PROGRESS BAR -->
			<div id ="userProgress">
				<div id ="progressBar">0%</div>
			</div>
			<br>
			<br>
			<button onclick ="move()">Go</button>

			<script>
			function move() {
				var elem = document.getElementById("progressBar");
				var width = 1;
				var id = setInterval(frame, 10);
				function frame() {
					if (width >= 100) {
						clearInterval(id);
					} else {
						width++;
						elem.style.width = width + '%';
						elem.innerHTML = width * 1 + '%';
					}
				}
			}
			</script>

			<br>
			<br>

			<!-- timer implemented below -->
			<script>
				function completeTask (){
				setTimeout(function(){ alert("Good job! Go Home and rest"); }, 3000);
				}
			</script>
			
	</body>
	</center>
	</div>
</html>
