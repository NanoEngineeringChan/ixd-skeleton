<!DOCTYPE html>
<html>
	<link href ="/css/play.css" rel ="stylesheet">
	<script defer src = "/js/fontawesome-all.js"></script>
	<div class ="container">
	<head>
		<a href ="./index"><i class ="fa fa-home fa-2x"></i></a>
		<title>FocusFriend</title>
		<center>
			<h1>Focus Together!</h1>
			<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

			<!-- we should put their chosen animal var here later -->
			{{#with animals.[0]}}
			<a id="image"><img src ="{{imageURL}}"/></a>
			{{/with}}


	</head>
	<body>

			<p id="demo"></p>
			<button onclick ="completeTask()">Click When Time's Up to Finish!</button>

			<!-- PROGRESS BAR -->
			<div id ="userProgress">
				<div id ="progressBar">0%</div>
			</div>
			<br>
			<br>
			<button onclick ="move()">Go</button>

			<script>
			function move() {
				var elem = document.getElementById("progressBar");
				var width = 1;
				var id = setInterval(frame, 10);
				function frame() {
					if (width >= 100) {
						clearInterval(id);
					} else {
						width++;
						elem.style.width = width + '%';
						elem.innerHTML = width * 1 + '%';
					}
				}
			}
			</script>

			<br>
			<br>

			<!-- timer implemented below -->
			<script>
				function completeTask (){
				setTimeout(function(){ alert("Good job! Go Home and rest"); }, 3000);
				}
			</script>



			{{#each animals}}
					<!--	<a id="image"><img src ="{{imageURL}}"/></a> -->
			{{/each}}

			<!-- timer implemented below -->
			<script>
				    var image=document.getElementById("image");
					   
				    //shouln't affect timeout
				    if (document.hasFocus()) {

				    	var currentPos = 0;
					    var images = ["./images/Happy1.png","./images/Happy2","./images/Happy3.jpg"]
					    function foto() {
					        if (++currentPos >= images.length) currentPos = 0;
					        image.src = images[currentPos];
					    }
					    setInterval(foto, 3000);

						var x = document.getElementById("demo");
				   
				    }
				    // doc is not in focus and has been touching 
				    else {
						
						//var x = document.getElementById("image");
						//image.src=parsedData[0].imageURL;
						//console.log(image)
						//var imagu = document.getElementById("image");
						document.getElementById("image").src = "./images/Sad.png";
						//image.src="./images/Sad.png";
						//badPic();
						console.log(image);
					  	document.write("doggo getting sadder");
					  	

				  		//}
				    }
				
			</script>
	</body>
	</center>
	</div>
</html>
