<!DOCTYPE html>
<html>
	<link href ="/css/general.css" rel="stylesheet">
	<link href ="/css/play.css" rel ="stylesheet">
	<script defer src = "/js/fontawesome-all.js"></script>
	<div class ="container">
	<head>
		<a href ="./index"><i class ="fa fa-home fa-2x"></i></a>
		<title>FocusFriend</title>
		<center>
			<h1>Focus Together!</h1>
			<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
				{{#with animals.[0]}}
						<img id ="image" src ="{{imageURL}}"/>
					{{/with}} 
			
			<script>
					var i = document.getElementById("image");
					setInterval("myFunction()", 10);
				
					function myFunction() {

				
				    	if(document.hasFocus()) {
				    		setTimeout( function() {i.src = "./images/Happy1.png"},2000);
				    		setTimeout( function() {i.src = "./images/Happy2.png"},2000);
				    		//setTimeout( function() {i.src = "./images/Happy3.jpg"},2000);
				    		//setInterval(foto(), 1000);
						// var x = document.getElementById("demo");
				   		} else {
				    // doc is not in focus and has been touching 
						
						//var x = document.getElementById("image");
						//image.src=parsedData[0].imageURL;
						//console.log(image)
						//var imagu = document.getElementById("image");
							i.src = "./images/Sad.png";
						//image.src="./images/Sad.png";
						//badPic();
							console.log(image);
					  		//document.write("doggo getting sadder");
						}
					}
			</script>

	</head>
	<body>

<!-- 			{{#each animals}}
						<a id="image"><img src ="{{imageURL}}"/></a> 
			{{/each}} -->
		<!-- we should put their chosen animal var here later -->
		

			<!-- timer implemented below -->			
			<p id="demo"></p>
			<button onclick ="completeTask()">Click When Time's Up to Finish!</button>

			<!-- PROGRESS BAR PRODUCTIVITY-->
			<br>
			<br>
			<br>
			<div id ="productivityProgress">
				<div id ="productivityBar">100%</div>
			</div>
			<br>

			<!-- PROGRESS BAR TIME-->
			<div id ="userProgress">
				<div id ="progressBar">0%</div>
			</div>
			<br>
			<br>
			<br>
			<br>
			<button onclick ="move(); calculate()">Go</button>


 			<!-- <div id ="percentage" class ="percentage-count">100%</div>
 				<div class ="progress-bar">
 					<div class ="progress" id ="progress">
 					</div>
 				</div>
 			</div> -->

			<script>
			function processInput() {
				//get user's minute and hour input
				var str = location.search;
				var hours = str.substring(str.indexOf("=") + 1, str.indexOf("&"));
				var minutes = str.substring(str.lastIndexOf("=") + 1);

				//convert the given input into milliseconds
				var totalTime = (hours * 3600000) + (minutes * 60000);
				//return the total time in milliseconds
				return totalTime;
			}

			function move() {
				//get the total time from this function into variable time
				var time = processInput();
				//make that progress bar move
				var elem = document.getElementById("progressBar");
				var width = 1;

				//divide the total time into percentage, which is out of 100
				var count = time/100;
				
				//visual movement
				var id = setInterval(frame, count);
				function frame() {
					if (width >= 100) {
						clearInterval(id);
					} else {
						width++;
						elem.style.width = width + '%';
						elem.innerHTML = width * 1 + '%';
					}
				}
			}

			//calculate total productivity time. Should be 100% initially, then decrease if the user is not being producitive
			function calculate() {
			}

			// function progressMove(){
			// 	var prg = document.getElementById("progress");
			// 	var percent = document.getElementById("percentage");
			// 	var count = 5;
			// 	var progress = 0;
			// 	var id = setInterval(frame, 50);

			// 	function frame() {
			// 		if (progress == 20 && count == 100) {
			// 			clearInterval(id);
			// 		} else {
			// 			progress += 1;
			// 			count += 10;
			// 			prg.style.width = progress + 'em';
			// 			percent.innerHTML = count + '%';
			// 		}
			// 	}

			// }

			// progressMove();

			</script>

			<br>
			<br>

			<!-- timer implemented below -->
			<script>
				function completeTask (){
				setTimeout(function(){ alert("Good job! Go Home and rest"); }, 3000);
				}
			</script>
			
	</body>
	</center>
	</div>
</html>
